var flappyPlayerObject=function(e,t){PIXI.Sprite.call(this),this.parentScene=e,this.parentStage=t,this.texture=flappyPlayerObject.frames[0],this.frame=0,this.currentFrame=new HAPIPair(0,3),this.colWidth=this.colHeight=64,this.anchor={x:.5,y:.5},this.position={x:renderer.width/2,y:renderer.height/2},this.gravity=0,this.gravityTimerMax=2,this.gravityTimer=this.gravityTimerMax,this.gravityJump=-8.5,MODE.add("flappyPlayerObject",["START","FLAP","DEAD","WIN"]),this.mode=MODE.flappyPlayerObject.START,this._order=10,this.float=new HAPIPair(0,2*Math.PI),this.allowQuit=!1};flappyPlayerObject.prototype=new PIXI.Sprite,flappyPlayerObject.prototype.constructor=flappyPlayerObject,flappyPlayerObject.prototype.destructor=function(){1==this.parentStage.checkChild(this)&&this.parentStage.removeChild(this)},flappyPlayerObject.prototype.logic=function(){var e=this;switch(0==this.parentStage.checkChild(this)&&this.parentStage.addChild(this),this.float.logic(),this.currentFrame.logic(),this.frame!=Math.floor(this.currentFrame.current)&&(this.frame=Math.floor(this.currentFrame.current),this.texture=flappyPlayerObject.frames[this.frame]),this.mode){case MODE.flappyPlayerObject.START:0==this.float.active&&this.float.set(0,2*Math.PI).start(5e3,MODE.HAPIPair.DURATION,MODE.HAPIPair.LOOP),this.position={x:renderer.width/2,y:renderer.height/2+3*Math.sin(this.float.current)},this.rotation=0,(1==CONTROLS.btnA.pressed||1==CONTROLS.btnB.pressed||1==CONTROLS.btnC.pressed)&&(this.gravity=this.gravityJump,this.mode=MODE.flappyPlayerObject.FLAP,this.parentScene.moving=!0,this.frame=0,this.currentFrame.set(0,3).start(150,MODE.HAPIPair.DURATION),objects[7].disappear(),objects[13].opacity.start(250,MODE.HAPIPair.DURATION));break;case MODE.flappyPlayerObject.FLAP:for(1==this.float.active&&this.float.stop(),this.gravityTimer-=calcSpeedPixel(1);this.gravityTimer<0;)this.gravityTimer+=this.gravityTimerMax,this.gravity++;this.position.y+=calcSpeedPixel(this.gravity),this.position.y<-48&&(this.position.y=-48),this.position.y>=renderer.height+48&&(this.position.y=renderer.height+48,this.mode=MODE.flappyPlayerObject.DEAD,0==this.parentScene.lives?(musicLibrary.rate("bigflappers",.7,1.75),musicLibrary.stop("bigflappers","volume",2),setTimeout(function(){musicLibrary.play("bigflappers",1,0),musicLibrary.stop("bigflappers")},2025)):(musicLibrary.rate("bigflappers",.25,5),musicLibrary.volume("bigflappers",.5,5)),objects.push(new flappyFailureObject(this.parentScene,this.parentStage,this.position)),setTimeout(function(){soundLibrary.play("rank",1,1,0),setTimeout(function(){objects[8].opacity.start(1e3,MODE.HAPIPair.DURATION)},500),setTimeout(function(){objects[7].set(0==e.parentScene.lives?"game_over":"try_again").appear()},1500),setTimeout(function(){e.allowQuit=!0,objects[9].opacity.start(1e3,MODE.HAPIPair.DURATION,MODE.HAPIPair.OSCILLATE)},2e3)},125),this.parentScene.moving=!1),(1==CONTROLS.btnA.pressed||1==CONTROLS.btnB.pressed||1==CONTROLS.btnC.pressed)&&(this.gravity=this.gravityJump,this.frame=0,this.currentFrame.set(0,3).start(150,MODE.HAPIPair.DURATION)),(hitTest(this,this.parentScene.pipe1._children[0])||hitTest(this,this.parentScene.pipe1._children[1])||hitTest(this,this.parentScene.pipe2._children[0])||hitTest(this,this.parentScene.pipe2._children[1]))&&(this.mode=MODE.flappyPlayerObject.DEAD,0==this.parentScene.lives?(musicLibrary.rate("bigflappers",.7,1.75),musicLibrary.stop("bigflappers","volume",2),setTimeout(function(){musicLibrary.play("bigflappers",1,0),musicLibrary.stop("bigflappers")},2025)):(musicLibrary.rate("bigflappers",.25,5),musicLibrary.volume("bigflappers",.5,5)),objects.push(new flappyFailureObject(this.parentScene,this.parentStage,this.position)),objects.push(new flappyFailureObject(this.parentScene,this.parentStage,this.position)),setTimeout(function(){soundLibrary.play("rank",1,1,0),setTimeout(function(){objects[8].opacity.start(1e3,MODE.HAPIPair.DURATION)},500),setTimeout(function(){objects[7].set(0==e.parentScene.lives?"game_over":"try_again").appear()},1500),setTimeout(function(){e.allowQuit=!0,0==e.parentScene.lives&&(objects[9].string="Press START to reset"),objects[9].opacity.start(1e3,MODE.HAPIPair.DURATION,MODE.HAPIPair.OSCILLATE)},2e3)},125),this.parentScene.moving=!1);var t=0;t=.03*this.gravity,t>.67&&(t=.67),this.rotation=Math.PI*(t/2);break;case MODE.flappyPlayerObject.DEAD:if(0==this.parentScene.lives&&1==musicLibrary.check("bigflappers","playing"))break;if(0==this.allowQuit)break;1==CONTROLS.start.pressed&&(this.allowQuit=!1,this.parentScene.lives--,gameSceneChangeReset="flappyBig",gameSceneChange="reset");break;case MODE.flappyPlayerObject.WIN:"undefined"==typeof this.holdingY&&(this.holdingY=this.position.y),0==this.float.active&&this.float.set(0,2*Math.PI).start(5e3,MODE.HAPIPair.DURATION,MODE.HAPIPair.LOOP),this.position={x:renderer.width/2,y:this.holdingY+3*Math.sin(this.float.current)},this.rotation=0}},loader.waitForTexture("flappy_big",function(){flappyPlayerObject.frames=[new PIXI.Texture(loader.textures.flappy_big.texture.baseTexture,new PIXI.Rectangle(112,0,112,112)),new PIXI.Texture(loader.textures.flappy_big.texture.baseTexture,new PIXI.Rectangle(0,0,112,112)),new PIXI.Texture(loader.textures.flappy_big.texture.baseTexture,new PIXI.Rectangle(112,0,112,112)),new PIXI.Texture(loader.textures.flappy_big.texture.baseTexture,new PIXI.Rectangle(224,0,112,112))]});