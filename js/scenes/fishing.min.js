gameScenes.fishing={renderTexture:new PIXI.RenderTexture(renderer,renderer.width,renderer.height),renderTop:new PIXI.Sprite,renderBottom:new PIXI.Sprite,renderStage:new PIXI.Container,surfaceHeight:new HAPIPair(renderer.height/2,renderer.height/2),lineTension:0,fade:function(){fg.set("0x000000",1,250),setTimeout(function(){gameSceneFading=STATE.gameSceneFading.FINISHED},500)},init:function(){bg.set("0x000000",1,1),fg.set("0x000000",0,250),saveDataToVar("fishing");var e=this;objects.push(new PIXI.Sprite),objects[2].texture=loader.textures.sovi_logo_water_displacement.texture,objects[2].tint=0,objects[2].logic=function(){this.position.x+=calcSpeedPixel(1),this.position.y+=calcSpeedPixel(.5)},objects[2].destructor=function(){e.renderBottom.removeChild(this)},objects[2]._filter=new PIXI.filters.DisplacementFilter(objects[2]),this.renderBottom.addChild(objects[2]),this.renderBottom.filters=[objects[2]._filter],this.renderTop._order=3,this.renderBottom._order=2,this.music="mystic_ruins",0==musicLibrary.check(this.music,"playing")&&musicLibrary.play(this.music,1,1,0),objects.push(new PIXI.Container),objects[3]._children=[],objects[3].width=renderer.width,objects[3].height=renderer.height,objects[3].logic=function(){for(var e=0;e<this._children.length;e++)"function"==typeof this._children[e].logic&&this._children[e].logic()},objects[3].filters=[objects[2]._filter],objects[3].blendMode=PIXI.BLEND_MODES.ADD,objects[3].filterBlendMode=PIXI.BLEND_MODES.ADD,objects[3]._order=0,objects[3].alpha=.9,objects[3]._children.push(new PIXI.Sprite),objects[3]._children[0].texture=loader.textures.blank.texture,objects[3]._children[0].width=objects[3]._children[0].height=1,objects[3]._children[0].alpha=0,objects[3].addChild(objects[3]._children[0]),objects[3]._children.push(new PIXI.Sprite),objects[3]._children[1].texture=loader.textures.blank.texture,objects[3]._children[1].tint=12384,objects[3]._children[1].parentScene=e,objects[3]._children[1].width=renderer.width,objects[3]._children[1].logic=function(){objects[3]._children[1].height=renderer.height-this.parentScene.surfaceHeight.current,objects[3]._children[1].position.y=this.parentScene.surfaceHeight.current},objects[3].addChild(objects[3]._children[1]),objects[3]._children.push(new PIXI.extras.TilingSprite(loader.textures.sovi_logo_water.texture,renderer.width+256,2*renderer.height)),objects[3]._children[2].alpha=.1,objects[3]._children[2].scale={x:1,y:.5},objects[3]._children[2].tint=8454143,objects[3]._children[2].parentScene=e,objects[3]._children[2].destructor=function(){objects[3].removeChild(this)},objects[3]._children[2].logic=function(){this.position.x=(this.position.x-calcSpeedPixel(.5))%256,this.position.y=this.parentScene.surfaceHeight.current},objects[3].addChild(objects[3]._children[2]),stage.addChild(objects[3]),objects[3].destructor=function(){stage.removeChild(this)},objects.push(loader.backgrounds.mysticruins_river),loader.backgrounds.mysticruins_river.setParent(stage),loader.backgrounds.mysticruins_river.setOpacity(1,500),this.hookObject=new hookObject({x:936,y:128},2,e),objects.push(this.hookObject);for(var t=0;10>t;t++)objects.push(new fishObject({x:960*Math.random()+320,y:296*Math.random()+360},.5*Math.random()+.5,{x:32,y:16},{x:96,y:48},2*Math.random()+1,5*Math.random()+2,parseInt(25*Math.random()+10),{l:48*Math.random(),r:renderer.width/2+(360*Math.random()-120),h:64+32*Math.random()},e));objects.push(new froggyObject({x:640,y:656},{x:32,y:16},{x:96,y:48},2,1500,5,50,e)),objects.push(new PIXI.Graphics);var i=objects.length-1;objects[i].order=-999,objects[i].parentScene=e,objects[i].endPosition={x:0,y:0},this.renderStage.addChild(objects[i]),objects[i].logic=function(){(this.endPosition.x!=this.parentScene.hookObject.position.x||this.endPosition.y!=this.parentScene.hookObject.position.y)&&(this.clear(),this.lineStyle(1,9539985,1),this.moveTo(this.parentScene.hookObject.initialPosition.x,this.parentScene.hookObject.initialPosition.y),this.lineTo(this.parentScene.hookObject.position.x,this.parentScene.hookObject.position.y),this.endPosition.x=this.parentScene.hookObject.position.x,this.endPosition.y=this.parentScene.hookObject.position.y)},objects[i].destructor=function(){e.renderStage.removeChild(this)},objects.push(new PIXI.Sprite);var i=objects.length-1;objects[i].texture=new PIXI.Texture(loader.textures.fishing_big.texture.baseTexture,new PIXI.Rectangle(0,0,408,300)),objects[i]._order=-1,objects[i].anchor={x:.5,y:.8},objects[i].position={x:1140,y:300},stage.addChild(objects[i]),objects[i].destructor=function(){stage.removeChild(this)},objects.push(new PIXI.Sprite);var i=objects.length-1;objects[i].texture=new PIXI.Texture(loader.textures.mysticruins_fishing.texture.baseTexture,new PIXI.Rectangle(renderer.width,0,renderer.width,renderer.height+32)),objects[i]._order=0,stage.addChild(objects[i]),objects[i].destructor=function(){stage.removeChild(this)},objects.push(new PIXI.Sprite);var i=objects.length-1;objects[i].texture=new PIXI.Texture(loader.textures.mysticruins_fishing.texture.baseTexture,new PIXI.Rectangle(0,0,renderer.width,renderer.height+32)),objects[i]._order=5,objects[i].filters=[objects[2]._filter],stage.addChild(objects[i]),objects[i].destructor=function(){stage.removeChild(this)},objects.push(new HAPITextCentreImage("Choose your Drop Point with the D-Pad",37,{name:"rodin",size:20,weight:600,color:"0xFFFFFF"},{w:1280,h:24},stage));var i=objects.length-1;objects[i].offset={x:0,y:560},objects[i].opacity.set(1,1),objects.push(new HAPITextCentreImage("Cast and Reel with C",20,{name:"rodin",size:20,weight:600,color:"0xFFFFFF"},{w:1280,h:24},stage));var i=objects.length-1;objects[i].offset={x:0,y:590},objects[i].opacity.set(1,1),objects.push(new HAPITextCentreImage("Cut the Line with A",19,{name:"rodin",size:20,weight:600,color:"0xFFFFFF"},{w:1280,h:24},stage));var i=objects.length-1;objects[i].offset={x:0,y:620},objects[i].opacity.set(1,1),objects.push(new HAPITextCentreImage("Shuffle with the D-Pad",22,{name:"rodin",size:20,weight:600,color:"0xFFFFFF"},{w:1280,h:24},stage));var i=objects.length-1;objects[i].offset={x:0,y:650},objects[i].opacity.set(1,1),objects.push(new HAPITextCentreImage("Your fishing rod gets stronger with every fish you catch!",101,{name:"rodin",size:20,weight:600,color:"0xFFFFFF"},{w:1280,h:24},stage));var i=objects.length-1;objects[i].offset={x:0,y:680},objects[i].opacity.set(1,1),this.onscreenText=new fishingTextObject(this,stage,"fish_for_froggy"),this.onscreenText.appear(!0),objects.push(this.onscreenText),this.tensionBarHolder=new PIXI.Sprite,this.tensionBarHolder.position={x:938,y:88},this.tensionBarHolder.texture=new PIXI.Texture(loader.textures.fishing_tension.texture.baseTexture,new PIXI.Rectangle(0,0,224,20)),this.tensionBarHolder._order=6,this.tensionBarHolder._parent=this,this.tensionBarHolder.logic=function(){this.alpha=this._parent.tensionBar.alpha},this.tensionBarHolder.destructor=function(){stage.removeChild(this)},objects.push(this.tensionBarHolder),stage.addChild(this.tensionBarHolder),this.tensionBar=new PIXI.Sprite,this.tensionBar.position={x:940,y:90},this.tensionBar.width=200,this.tensionBar.height=16,this.tensionBar.addChild(new PIXI.Sprite),this.tensionBar.addChild(new PIXI.Sprite),this.tensionBar.children[0].texture=new PIXI.Texture(loader.textures.fishing_tension.texture.baseTexture,new PIXI.Rectangle(0,20,200,16)),this.tensionBar.children[0].width=this.tensionBar.children[0].height=1,this.tensionBar.children[1].texture=new PIXI.Texture(loader.textures.fishing_tension.texture.baseTexture,new PIXI.Rectangle(0,36,200,16)),this.tensionBar.children[1].width=this.tensionBar.children[1].height=1,this.tensionBar.children[1].alpha=0,this.tensionBar._order=5,this.tensionBar.opacity=new HAPIPair(0,0),this.tensionBar._parent=this,this.tensionBar.logic=function(){this.opacity.logic(),this.alpha!=this.opacity.current&&(this.alpha=this.opacity.current),this.width=200*(this._parent.lineTension>=100?1:this._parent.lineTension/100),1==this.alpha&&this._parent.lineTension>=80&&0==soundLibrary.check("warning","playing")&&1==musicLibrary.check("fishing","playing")?soundLibrary.play("warning",1,1,0):(1!=this.alpha||this._parent.lineTension<80||0==musicLibrary.check("fishing","playing"))&&1==soundLibrary.check("warning","playing")&&soundLibrary.stop("warning"),this.children[1].alpha=this._parent.lineTension>=100?1:this._parent.lineTension/100,1==musicLibrary.check("fishing","playing")&&0==this.opacity.end?this.opacity.set(0,1).start(250,MODE.HAPIPair.DURATION):0==musicLibrary.check("fishing","playing")&&0==musicLibrary.check("fishget","playing")&&0==musicLibrary.check("fishmiss","playing")&&1==this.opacity.end&&this.opacity.set(1,0).start(250,MODE.HAPIPair.DURATION)},this.tensionBar.destructor=function(){stage.removeChild(this)},objects.push(this.tensionBar),stage.addChild(this.tensionBar),this.gameOver=!1,setTimeout(function(){"fish_for_froggy"==e.onscreenText.whichTexture&&1==e.onscreenText.alpha&&e.onscreenText.disappear();for(var t=0;t<objects.length;t++)objects[t]instanceof HAPITextCentreImage&&1==objects[t].opacity.current&&objects[t].opacity.set(1,0).start(250,MODE.HAPIPair.DURATION)},9500),stage.addChild(e.renderTop),stage.addChild(e.renderBottom)},logic:function(){this.surfaceHeight.logic(),this.renderTexture.clear(),this.renderTexture.render(this.renderStage),this.renderTop.texture=new PIXI.Texture(this.renderTexture.baseTexture,new PIXI.Rectangle(0,0,renderer.width,this.surfaceHeight.current)),this.renderBottom.texture=new PIXI.Texture(this.renderTexture.baseTexture,new PIXI.Rectangle(0,this.surfaceHeight.current,renderer.width,renderer.height-this.surfaceHeight.current)),this.renderBottom.position.y=this.surfaceHeight.current},exit:function(){stage.removeChild(this.renderTop),stage.removeChild(this.renderBottom)}};