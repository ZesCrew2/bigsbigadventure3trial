gameScenes.snailMaze={fade:function(){fg.set("0x000000",1,250),setTimeout(function(){gameSceneFading=STATE.gameSceneFading.FINISHED},500)},init:function(){var e=this;bg.set("0x000000",1,1),fg.set("0x000000",0,250),saveDataToVar("snailMaze"),this.timer=new HAPIPair(151,0),this.timerCurrent=151,setTimeout(function(){musicLibrary.play("snail_maze_whistle",1,.5,0),e.timer.start(1e3*(e.timer.begin-1),MODE.HAPIPair.DURATION)},250),this.maze={boxSize:32,lineWidth:2.5,speed:300,size:[30,16],start:[0,15],goal:[29,4],collision:[[7,3,9,5,3,3,3,9,5,3,3,3,3,3,3,9,5,3,3,1,3,3,1,3,3,3,3,3,3,9],[5,3,10,4,3,3,9,6,10,5,9,5,9,5,9,12,14,5,9,12,5,9,12,5,3,3,3,9,5,10],[6,9,5,2,3,9,6,3,3,8,12,12,12,12,12,6,9,14,12,12,12,14,12,6,3,3,9,12,6,9],[5,10,6,9,13,4,3,3,9,14,6,10,6,10,6,9,6,3,10,12,6,3,10,5,3,3,8,12,13,12],[6,3,9,12,12,6,3,9,12,5,9,5,11,5,1,2,3,3,9,6,3,3,3,10,7,9,12,6,10,14],[5,3,10,12,12,7,1,10,6,10,6,10,5,10,6,9,5,3,0,3,1,3,3,3,9,12,6,3,9,13],[12,5,3,8,6,9,4,1,3,3,9,5,10,5,9,12,6,9,12,13,6,3,3,9,6,10,5,11,12,12],[12,6,9,4,3,10,12,6,3,9,12,12,5,10,12,6,11,12,6,8,7,3,9,14,5,3,10,5,10,12],[4,9,12,14,5,9,6,3,11,12,14,6,2,9,6,3,9,12,5,10,7,9,6,3,8,5,3,10,5,10],[12,12,12,5,10,14,5,3,11,6,9,5,9,6,9,5,10,12,12,7,9,6,3,3,8,4,9,5,10,13],[12,6,10,12,5,3,8,5,3,3,10,14,12,5,10,12,5,10,6,9,6,9,5,3,10,12,12,12,5,10],[12,5,3,10,6,9,14,14,5,3,3,3,10,12,5,10,6,3,9,6,9,6,2,9,5,10,6,10,6,9],[12,6,9,5,9,12,5,9,6,9,7,3,3,10,6,11,13,7,2,9,6,3,9,14,12,5,9,5,3,10],[4,3,10,12,6,10,12,6,9,12,5,3,3,3,3,3,10,13,5,10,13,5,2,3,10,12,14,12,5,9],[4,9,5,2,9,5,10,5,10,4,10,5,9,5,9,5,3,10,14,5,8,4,9,5,1,2,3,10,12,12],[14,6,10,7,2,10,7,2,3,2,3,10,6,10,6,10,7,3,3,10,6,10,6,10,6,3,3,3,10,14]],lines:[[0,1,2,1],[4,1,7,1],[9,1,15,1],[17,1,19,1],[20,1,22,1],[23,1,29,1],[1,2,3,2],[4,2,6,2],[7,2,9,2],[16,2,17,2],[24,2,27,2],[29,2,30,2],[0,3,1,3],[3,3,5,3],[6,3,9,3],[15,3,16,3],[17,3,18,3],[21,3,22,3],[23,3,26,3],[28,3,29,3],[1,4,3,4],[6,4,8,4],[9,4,15,4],[16,4,19,4],[20,4,23,4],[24,4,26,4],[0,5,2,5],[5,5,7,5],[12,5,13,5],[15,5,18,5],[19,5,25,5],[27,5,30,5],[1,6,3,6],[5,6,6,6],[7,6,12,6],[13,6,15,6],[17,6,18,6],[19,6,20,6],[21,6,24,6],[26,6,28,6],[2,7,3,7],[4,7,5,7],[8,7,10,7],[12,7,13,7],[16,7,17,7],[20,7,23,7],[24,7,26,7],[27,7,28,7],[1,8,2,8],[4,8,6,8],[7,8,9,8],[13,8,14,8],[15,8,17,8],[18,8,19,8],[20,8,22,8],[23,8,24,8],[25,8,27,8],[28,8,29,8],[3,9,4,9],[6,9,9,9],[10,9,13,9],[14,9,16,9],[19,9,21,9],[22,9,24,9],[26,9,28,9],[29,9,30,9],[4,10,6,10],[7,10,10,10],[13,10,14,10],[16,10,17,10],[19,10,20,10],[21,10,24,10],[28,10,29,10],[1,11,3,11],[5,11,6,11],[8,11,12,11],[14,11,15,11],[17,11,19,11],[20,11,21,11],[23,11,25,11],[29,11,30,11],[2,12,5,12],[6,12,8,12],[9,12,13,12],[15,12,18,12],[19,12,20,12],[21,12,23,12],[25,12,29,12],[1,13,2,13],[8,13,9,13],[10,13,16,13],[17,13,19,13],[20,13,22,13],[23,13,24,13],[28,13,30,13],[1,14,3,14],[4,14,6,14],[7,14,8,14],[11,14,17,14],[19,14,20,14],[22,14,25,14],[26,14,27,14],[3,15,4,15],[6,15,7,15],[8,15,9,15],[10,15,11,15],[16,15,19,15],[25,15,28,15],[1,6,1,8],[1,9,1,13],[1,15,1,16],[2,2,2,4],[2,8,2,10],[2,14,2,15],[3,0,3,2],[3,4,3,6],[3,7,3,11],[3,12,3,14],[3,15,3,16],[4,3,4,7],[4,8,4,9],[4,10,4,12],[4,13,4,14],[5,3,5,6],[5,9,5,10],[5,12,5,13],[5,14,5,15],[6,2,6,3],[6,6,6,10],[6,11,6,14],[6,15,6,16],[7,1,7,2],[7,7,7,8],[7,10,7,12],[7,13,7,15],[8,0,8,1],[8,4,8,6],[8,11,8,13],[9,1,9,2],[9,3,9,5],[9,8,9,10],[9,13,9,15],[10,2,10,4],[10,5,10,6],[10,7,10,9],[10,12,10,14],[11,1,11,3],[11,4,11,5],[11,6,11,11],[11,14,11,15],[12,2,12,4],[12,5,12,6],[12,7,12,8],[12,10,12,11],[12,15,12,16],[13,1,13,3],[13,4,13,5],[13,6,13,7],[13,9,13,12],[13,14,13,15],[14,2,14,4],[14,5,14,6],[14,7,14,9],[14,11,14,13],[14,15,14,16],[15,1,15,3],[15,6,15,8],[15,9,15,11],[15,14,15,15],[16,0,16,2],[16,3,16,4],[16,5,16,7],[16,10,16,13],[16,15,16,16],[17,1,17,3],[17,7,17,10],[17,12,17,14],[18,2,18,3],[18,6,18,11],[18,13,18,15],[19,1,19,5],[19,6,19,7],[19,9,19,10],[19,11,19,12],[19,14,19,15],[20,1,20,4],[20,6,20,9],[20,10,20,11],[20,12,20,14],[20,15,20,16],[21,2,21,3],[21,9,21,10],[21,11,21,12],[21,13,21,15],[22,1,22,3],[22,8,22,9],[22,10,22,11],[22,15,22,16],[23,1,23,4],[23,7,23,8],[23,12,23,13],[23,14,23,15],[24,4,24,5],[24,6,24,8],[24,11,24,13],[24,15,24,16],[25,5,25,6],[25,8,25,11],[25,12,25,14],[26,4,26,7],[26,10,26,12],[26,13,26,14],[27,2,27,5],[27,7,27,8],[27,9,27,11],[27,12,27,14],[28,1,28,4],[28,6,28,7],[28,8,28,9],[28,10,28,12],[28,13,28,15],[29,3,29,8],[29,9,29,10],[29,14,29,16]]},objects.push(new PIXI.Graphics),objects[2].beginFill(255,1),objects[2].lineStyle(this.maze.lineWidth,45311,1),objects[2].drawRect(0,0,this.maze.size[0]*this.maze.boxSize,this.maze.size[1]*this.maze.boxSize),objects[2].endFill();for(var t=0;t<this.maze.lines.length;t++)objects[2].lineStyle(this.maze.lineWidth,45311,1),objects[2].moveTo(this.maze.lines[t][0]*this.maze.boxSize,this.maze.lines[t][1]*this.maze.boxSize),objects[2].lineTo(this.maze.lines[t][2]*this.maze.boxSize,this.maze.lines[t][3]*this.maze.boxSize);stage.addChild(objects[2]),objects[2].position.x=640-this.maze.size[0]*this.maze.boxSize/2,objects[2].position.y=720-this.maze.size[1]*this.maze.boxSize-16,objects[2]._order=999,objects[2].destructor=function(){stage.removeChild(this)},objects.push(new PIXI.Sprite),objects[3]._order=10,objects[3].position.x=640-this.maze.size[0]*this.maze.boxSize/2+this.maze.start[0]*this.maze.boxSize,objects[3].position.y=720-this.maze.size[1]*this.maze.boxSize-16+this.maze.start[1]*this.maze.boxSize,objects[3]._timer=new HAPIPair(0,2),objects[3]._timer.start(2e3,MODE.HAPIPair.DURATION,MODE.HAPIPair.LOOP),objects[3].logic=function(){this._timer.logic(),this.alpha=1-Math.floor(this._timer.current)},objects[3].texture=new PIXI.Texture(loader.textures.snail_maze_goal.texture.baseTexture,new PIXI.Rectangle(64,64,64,64)),objects[3].width=objects[3].height=this.maze.boxSize,stage.addChild(objects[3]),objects[3].destructor=function(){stage.removeChild(this)},objects.push(new PIXI.Container),objects[4]._order=3,objects[4].position.x=640-this.maze.size[0]*this.maze.boxSize/2+this.maze.goal[0]*this.maze.boxSize,objects[4].position.y=720-this.maze.size[1]*this.maze.boxSize-16+this.maze.goal[1]*this.maze.boxSize,objects[4]._children=[],objects[4]._timer=new HAPIPair(0,2),objects[4]._timer.start(2e3,MODE.HAPIPair.DURATION,MODE.HAPIPair.LOOP),objects[4].logic=function(){this._timer.logic(),0==Math.floor(this._timer.current)?(this._children[0].alpha=1,this._children[1].alpha=1,this._children[2].alpha=0,this._order=3):1==Math.floor(this._timer.current)&&(this._children[0].alpha=0,this._children[1].alpha=0,this._children[2].alpha=1,this._order=10)},objects[4]._children.push(new PIXI.Graphics),objects[4]._children[0].beginFill(12582912,1),objects[4]._children[0].lineStyle(0,0,0),objects[4]._children[0].moveTo(0,0),objects[4]._children[0].lineTo(0,4*this.maze.boxSize),objects[4]._children[0].lineTo(.5*this.maze.boxSize,4.5*this.maze.boxSize),objects[4]._children[0].lineTo(this.maze.boxSize,4*this.maze.boxSize),objects[4]._children[0].lineTo(this.maze.boxSize,0),objects[4]._children[0].lineTo(.5*this.maze.boxSize,.5*this.maze.boxSize),objects[4]._children[0].endFill(),objects[4]._children[0]._order=2,objects[4]._children[0].position={x:0,y:-4*this.maze.boxSize},objects[4].addChild(objects[4]._children[0]),objects[4]._children.push(new PIXI.Sprite),objects[4]._children[1].texture=new PIXI.Texture(loader.textures.snail_maze_goal.texture.baseTexture,new PIXI.Rectangle(0,0,64,224)),objects[4]._children[1]._order=1,objects[4]._children[1].position={x:0,y:-3.5*this.maze.boxSize},objects[4]._children[1].width=this.maze.boxSize,objects[4]._children[1].height=3.5*this.maze.boxSize,objects[4].addChild(objects[4]._children[1]),objects[4]._children.push(new PIXI.Sprite),objects[4]._children[2].texture=new PIXI.Texture(loader.textures.snail_maze_goal.texture.baseTexture,new PIXI.Rectangle(64,0,64,64)),objects[4]._children[2]._order=3,objects[4]._children[2].position={x:0,y:0},objects[4]._children[2].width=objects[4]._children[2].height=this.maze.boxSize,objects[4].addChild(objects[4]._children[2]),stage.addChild(objects[4]),objects[4].destructor=function(){stage.removeChild(this)},objects.push(new PIXI.Sprite),objects[5].frames=[];for(var t=0;4>t;t++)for(var i=0;4>i;i++)objects[5].frames.push(new PIXI.Texture(loader.textures.snail_maze_big.texture.baseTexture,new PIXI.Rectangle(32*i,32*t,32,32)));objects[5].baseFrame=4,objects[5].animationFrame=new HAPIPair(0,4),objects[5].turnAroundTimer=void 0,objects[5].texture=objects[5].frames[objects[5].baseFrame],objects[5].width=objects[5].height=this.maze.boxSize,objects[5].movement=[new HAPIPair(0,this.maze.boxSize),new HAPIPair(0,this.maze.boxSize),new HAPIPair(0,this.maze.boxSize),new HAPIPair(0,this.maze.boxSize)],objects[5].moving=!1,objects[5].lockControls=!1,objects[5].mazePosition={x:this.maze.start[0],y:this.maze.start[1]},objects[5]._order=5,objects[5].logic=function(){if(this.position.x=640-e.maze.size[0]*e.maze.boxSize/2+this.mazePosition.x*e.maze.boxSize+this.movement[3].current-this.movement[2].current,this.position.y=720-e.maze.size[1]*e.maze.boxSize-16+this.mazePosition.y*e.maze.boxSize+this.movement[1].current-this.movement[0].current,1==this.movement[0].logic()&&(this.mazePosition.y--,this.movement[0].current=0,this.moving=!1),1==this.movement[1].logic()&&(this.mazePosition.y++,this.movement[1].current=0,this.moving=!1),1==this.movement[2].logic()&&(this.mazePosition.x--,this.movement[2].current=0,this.moving=!1),1==this.movement[3].logic()&&(this.mazePosition.x++,this.movement[3].current=0,this.moving=!1),this.texture=this.frames[this.baseFrame+Math.floor(this.animationFrame.current)],this.animationFrame.logic(),0==this.moving&&0==this.lockControls&&(this.mazePosition.x==e.maze.goal[0]&&this.mazePosition.y==e.maze.goal[1]?(musicLibrary.stop("snail_maze_whistle"),objects[3]._timer.stop(),objects[4]._timer.stop(),e.timer.stop(),setTimeout(function(){musicLibrary.play("snail_maze_end_whistle",1,.75,0,!0)},10),setTimeout(function(){fg.set("0x000000",1,250),setTimeout(function(){gameSceneChange="textEngine",textEngineScript="trial_mazeend"},500)},2500),this.lockControls=!0):1==CONTROLS.up.held&&0==(1&e.maze.collision[this.mazePosition.y][this.mazePosition.x])?(this.movement[0].set(0,e.maze.boxSize).start(e.maze.speed,MODE.HAPIPair.DURATION),0==this.animationFrame.active&&this.animationFrame.start(2*e.maze.speed,MODE.HAPIPair.DURATION,MODE.HAPIPair.LOOP),clearTimeout(this.turnAroundTimer),this.turnAroundTimer=void 0,this.baseFrame=0,this.moving=!0):1==CONTROLS.down.held&&0==(2&e.maze.collision[this.mazePosition.y][this.mazePosition.x])?(this.movement[1].set(0,e.maze.boxSize).start(e.maze.speed,MODE.HAPIPair.DURATION),0==this.animationFrame.active&&this.animationFrame.start(2*e.maze.speed,MODE.HAPIPair.DURATION,MODE.HAPIPair.LOOP),clearTimeout(this.turnAroundTimer),this.turnAroundTimer=void 0,this.baseFrame=4,this.moving=!0):1==CONTROLS.left.held&&0==(4&e.maze.collision[this.mazePosition.y][this.mazePosition.x])?(this.movement[2].set(0,e.maze.boxSize).start(e.maze.speed,MODE.HAPIPair.DURATION),0==this.animationFrame.active&&this.animationFrame.start(2*e.maze.speed,MODE.HAPIPair.DURATION,MODE.HAPIPair.LOOP),clearTimeout(this.turnAroundTimer),this.turnAroundTimer=void 0,this.baseFrame=8,this.moving=!0):1==CONTROLS.right.held&&0==(8&e.maze.collision[this.mazePosition.y][this.mazePosition.x])&&(this.movement[3].set(0,e.maze.boxSize).start(e.maze.speed,MODE.HAPIPair.DURATION),0==this.animationFrame.active&&this.animationFrame.start(2*e.maze.speed,MODE.HAPIPair.DURATION,MODE.HAPIPair.LOOP),clearTimeout(this.turnAroundTimer),this.turnAroundTimer=void 0,this.baseFrame=12,this.moving=!0)),0==this.moving&&1==this.animationFrame.active){this.animationFrame.stop(!0),"undefined"!=typeof this.turnAroundTimer&&(clearTimeout(this.turnAroundTimer),this.turnAroundTimer=void 0);var t=this;this.turnAroundTimer=0!=t.baseFrame?setTimeout(function(){t.baseFrame=4,t.turnAroundTimer=void 0},4*e.maze.speed):setTimeout(function(){t.baseFrame=Math.random()<.5?8:12,t.turnAroundTimer=setTimeout(function(){t.baseFrame=4,t.turnAroundTimer=void 0},50)},4*e.maze.speed)}},stage.addChild(objects[5]),objects[5].destructor=function(){stage.removeChild(this)},objects.push(new HAPITextImage("\nW E L C O M E   T O   T H E   S E G A\nM A S T E R   S Y S T E M .",72,{name:"arial",size:32,weight:700,color:"0xFFFFFF"},stage)),objects[6].position={x:objects[2].position.x,y:16},objects.push(new HAPITextImage("V 1 . 3",8,{name:"arial",size:32,weight:700,color:"0xFFFFFF"},stage)),objects[7].position={x:objects[2].position.x+objects[2].width-100,y:16},objects.push(new HAPITextImage('\n\n\nR D   {"color":"0xFFFF00"}1{default}   T I M E   {"color":"0x808000"}      {default}',88,{name:"arial",size:32,weight:700,color:"0xFFFFFF"},stage)),objects[8].position={x:objects[2].position.x+objects[2].width-353,y:16},objects.push(new HAPITextImage("\n\n\n1 5 0",6,{name:"arial",size:32,weight:700,color:"0xFFFF00"},stage)),objects[9].position={x:objects[2].position.x+objects[2].width-77,y:16},objects.push(new HAPITextImage("T I M E   U P",16,{name:"arial",size:32,weight:700,color:"0xFFFF00"},stage)),objects[10].position={x:(renderer.width-195)/2,y:172},objects[10].alpha=0,objects[10]._timer=new HAPIPair(0,2),objects.push(new HAPITextImage("T I M E   U P",16,{name:"arial",size:32,weight:700,color:"0xFFFFFF"},stage)),objects[11].position={x:(renderer.width-195)/2,y:172},objects[11].alpha=0},logic:function(){objects[10]._timer.logic(),1==this.timer.logic()&&(objects[10]._timer.start(500,MODE.HAPIPair.DURATION,MODE.HAPIPair.LOOP),setTimeout(function(){fg.set("0x000000",1,250),setTimeout(function(){gameSceneChange="reset",gameSceneChangeReset="snailMaze"},500)},3e3),musicLibrary.stop("snail_maze_whistle","volume",3),objects[3]._timer.stop(),objects[4]._timer.stop(),objects[5].lockControls=!0,this.timer.stop()),objects[10]._timer.beginFrame!=objects[10]._timer.endFrame&&(0==Math.floor(objects[10]._timer.current)?(objects[10].alpha=1,objects[11].alpha=0):1==Math.floor(objects[10]._timer.current)&&(objects[10].alpha=0,objects[11].alpha=1)),this.timerCurrent!=Math.floor(this.timer.current)&&(this.timerCurrent=Math.floor(this.timer.current),objects[9].string="\n\n\n"+Math.floor(this.timerCurrent/100)+" "+Math.floor(this.timerCurrent%100/10)+" "+Math.floor(this.timerCurrent%10))}};var snailMazeRingObject=function(){PIXI.Sprite.call(this),this.currentFrame=0,this.frameOffset=[0,!1],this.texture=snailMazeRingObject.frames[this.currentCurrent+this.frameOffset[0]],stage.addChild(this)};snailMazeRingObject.prototype=new PIXI.Sprite,snailMazeRingObject.prototype.constructor=snailMazeRingObject,snailMazeRingObject.prototype.destructor=function(){stage.removeChild(this)},snailMazeRingObject.prototype.logic=function(){var e=Math.floor(performance.now()/100)%4;1==this.frameOffset[1]&&0==e?this.frameOffset[0]=8:4==this.frameOffset[0]&&2==e&&(this.frameOffset[1]=!0),this.currentFrame!=e&&(this.texture=snailMazeRingObject.frames[e+this.frameOffset[0]],this.currentFrame=e)},loader.waitForTexture("snail_maze_ring",function(){snailMazeRingObject.frames=[new PIXI.Texture(loader.textures.snail_maze_ring.texture.baseTexture,new PIXI.Rectangle(0,0,32,32)),new PIXI.Texture(loader.textures.snail_maze_ring.texture.baseTexture,new PIXI.Rectangle(32,0,32,32)),new PIXI.Texture(loader.textures.snail_maze_ring.texture.baseTexture,new PIXI.Rectangle(64,0,32,32)),new PIXI.Texture(loader.textures.snail_maze_ring.texture.baseTexture,new PIXI.Rectangle(96,0,32,32)),new PIXI.Texture(loader.textures.snail_maze_ring.texture.baseTexture,new PIXI.Rectangle(0,32,32,32)),new PIXI.Texture(loader.textures.snail_maze_ring.texture.baseTexture,new PIXI.Rectangle(32,32,32,32)),new PIXI.Texture(loader.textures.snail_maze_ring.texture.baseTexture,new PIXI.Rectangle(64,32,32,32)),new PIXI.Texture(loader.textures.snail_maze_ring.texture.baseTexture,new PIXI.Rectangle(96,32,32,32)),new PIXI.Texture(loader.textures.snail_maze_ring.texture.baseTexture,new PIXI.Rectangle(0,0,1,1)),new PIXI.Texture(loader.textures.snail_maze_ring.texture.baseTexture,new PIXI.Rectangle(0,0,1,1)),new PIXI.Texture(loader.textures.snail_maze_ring.texture.baseTexture,new PIXI.Rectangle(0,0,1,1)),new PIXI.Texture(loader.textures.snail_maze_ring.texture.baseTexture,new PIXI.Rectangle(0,0,1,1))]});